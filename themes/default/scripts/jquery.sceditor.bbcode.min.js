/* SCEditor v1.4.5 | (C) 2011-2013, Sam Clarke | sceditor.com/license */
!function(a,b,c){"use strict";var d=a.sceditor.escapeEntities,e=a.sceditor.escapeUriScheme,f=a.sceditor.ie,g=f&&11>f;a.sceditor.BBCodeParser=function(b){if(!(this instanceof a.sceditor.BBCodeParser))return new a.sceditor.BBCodeParser(b);var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,e=this,w={open:"open",content:"content",newline:"newline",close:"close"},x=function(a,b,c,d,e,f){var g=this;g.type=a,g.name=b,g.val=c,g.attrs=d||{},g.children=e||[],g.closing=f||null};x.prototype={clone:function(a){var b=this;return new x(b.type,b.name,b.val,b.attrs,a?b.children:[],b.closing?b.closing.clone():null)},splitAt:function(b){var c,d=this,e=0,f=d.children.length;if("number"!=typeof b&&(b=a.inArray(b,d.children)),0>b||b>f)return null;for(;f--;)f>=b?e++:f=0;return c=d.clone(),c.children=d.children.splice(b,e),c}},h=function(){e.opts=a.extend({},a.sceditor.BBCodeParser.defaults,b),e.bbcodes=a.sceditor.plugins.bbcode.bbcodes},e.tokenize=function(a){var b,c,d,e=[],f=[{type:"close",regex:/^\[\/[^\[\]]+\]/},{type:"open",regex:/^\[[^\[\]]+\]/},{type:"newline",regex:/^(\r\n|\r|\n)/},{type:"content",regex:/^([^\[\r\n]+|\[)/}];f.reverse();a:for(;a.length;){for(d=f.length;d--;)if(c=f[d].type,(b=a.match(f[d].regex))&&b[0]){e.push(i(c,b[0])),a=a.substr(b[0].length);continue a}a.length&&e.push(i(w.content,a)),a=""}return e},i=function(b,c){var d,e,f;return"open"===b&&(d=c.match(/\[([^\]\s=]+)(?:([^\]]+))?\]/))?(f=u(d[1]),d[2]&&(d[2]=a.trim(d[2]))&&(e=j(d[2]))):"close"===b&&(d=c.match(/\[\/([^\[\]]+)\]/))?f=u(d[1]):"newline"===b&&(f="#newline"),f&&("open"!==b&&"close"!==b||a.sceditor.plugins.bbcode.bbcodes[f])||(b="content",f="#"),new x(b,f,c,e)},j=function(b){var c,d=/([^\s=]+)=(?:(?:(["'])((?:\\\2|[^\2])*?)\2)|((?:.(?!\s\S+=))*.))/g,e=a.sceditor.plugins.bbcode.stripQuotes,f={};if("="===b.charAt(0)&&b.indexOf("=",1)<0)f.defaultattr=e(b.substr(1));else for("="===b.charAt(0)&&(b="defaultattr"+b);c=d.exec(b);)f[u(c[1])]=e(c[3])||c[4];return f},e.parse=function(a,b){var c=k(e.tokenize(a));return e.opts.fixInvalidChildren&&p(c),e.opts.removeEmptyTags&&o(c),e.opts.fixInvalidNesting&&m(c),l(c,null,b),e.opts.removeEmptyTags&&o(c),c},s=function(a,b,c){for(var d=c.length;d--;)if(c[d].type===b&&c[d].name===a)return!0;return!1},n=function(b,c){var d=b?e.bbcodes[b.name]:null,f=d?d.allowedChildren:null;return e.opts.fixInvalidChildren&&f?f&&a.inArray(c.name||"#",f)<0?!1:!0:!0},k=function(b){for(var c,d,f,g,h,i,j,k=[],l=[],m=[],n=function(){return v(m)},o=function(a){n()?n().children.push(a):l.push(a)},p=function(b){return n()&&(d=e.bbcodes[n().name])&&d.closedBy&&a.inArray(b,d.closedBy)>-1};c=b.shift();){switch(j=b[0],c.type){case w.open:p(c.name)&&m.pop(),o(c),d=e.bbcodes[c.name],d&&d.isSelfClosing||!d.closedBy&&!s(c.name,w.close,b)?d&&d.isSelfClosing||(c.type=w.content):m.push(c);break;case w.close:if(n()&&c.name!==n().name&&p("/"+c.name)&&m.pop(),n()&&c.name===n().name)n().closing=c,m.pop();else if(s(c.name,w.open,m)){for(;f=m.pop();){if(f.name===c.name){f.closing=c;break}g=f.clone(),k.length>1&&g.children.push(v(k)),k.push(g)}for(o(v(k)),h=k.length;h--;)m.push(k[h]);k.length=0}else c.type=w.content,o(c);break;case w.newline:n()&&j&&p((j.type===w.close?"/":"")+j.name)&&(j.type!==w.close||j.name!==n().name)&&(d=e.bbcodes[n().name],d&&d.breakAfter?m.pop():d&&d.isInline===!1&&e.opts.breakAfterBlock&&d.breakAfter!==!1&&m.pop()),o(c);break;default:o(c)}i=c}return l},l=function(a,b,c){var d,f,g,h,i,j,k,m,n=a.length,o=n;for(b&&(h=e.bbcodes[b.name]);o--;)if(d=a[o])if(d.type===w.newline){if(f=o>0?a[o-1]:null,g=n-1>o?a[o+1]:null,m=!1,!c&&h&&h.isSelfClosing!==!0&&(f?j||g||(h.isInline===!1&&e.opts.breakEndBlock&&h.breakEnd!==!1&&(m=!0),h.breakEnd&&(m=!0),j=m):(h.isInline===!1&&e.opts.breakStartBlock&&h.breakStart!==!1&&(m=!0),h.breakStart&&(m=!0))),f&&f.type===w.open&&(i=e.bbcodes[f.name])&&(c?i.isInline===!1&&(m=!0):(i.isInline===!1&&e.opts.breakAfterBlock&&i.breakAfter!==!1&&(m=!0),i.breakAfter&&(m=!0))),!c&&!k&&g&&g.type===w.open&&(i=e.bbcodes[g.name])&&(i.isInline===!1&&e.opts.breakBeforeBlock&&i.breakBefore!==!1&&(m=!0),i.breakBefore&&(m=!0),k=m,m)){a.splice(o,1);continue}m&&a.splice(o,1),k=!1}else d.type===w.open&&l(d.children,d,c)},m=function(b,c,d,f){var g,h,i,j,k,l,n=function(a){var b=e.bbcodes[a.name];return!b||b.isInline!==!1};for(c=c||[],f=f||b,h=0;h<b.length;h++)if((g=b[h])&&g.type===w.open){if(!n(g)&&d&&(i=v(c),l=i.splitAt(g),k=c.length>1?c[c.length-2].children:f,(j=a.inArray(i,k))>-1))return l.children.splice(a.inArray(g,l.children),1),k.splice(j+1,0,g,l),void 0;c.push(g),m(g.children,c,d||n(g),f),c.pop(g)}},p=function(a,b){for(var c,d,e=a.length;e--;)(c=a[e])&&(n(b,c)||(c.name=null,c.type=w.content,n(b,c)?(d=[e+1,0].concat(c.children),c.closing&&(c.closing.name=null,c.closing.type=w.content,d.push(c.closing)),e+=d.length-1,Array.prototype.splice.apply(a,d)):b.children.splice(e,1)),c.type===w.open&&p(c.children,c))},o=function(b){var c,d,f,g=b.length;for(f=function(a){for(var b=a.length;b--;){if(a[b].type===w.open)return!1;if(a[b].type===w.close)return!1;if(a[b].type===w.content&&a[b].val&&/\S|\u00A0/.test(a[b].val))return!1}return!0};g--;)(c=b[g])&&c.type===w.open&&(d=e.bbcodes[c.name],o(c.children),f(c.children)&&d&&!d.isSelfClosing&&!d.allowsEmpty&&b.splice.apply(b,a.merge([g,1],c.children)))},e.toHTML=function(a,b){return q(e.parse(a,b),!0)},q=function(b,h){var i,j,k,l,m,n,o,p,r=[];for(o=function(a){return(!a||("undefined"!=typeof a.isHtmlInline?a.isHtmlInline:a.isInline))!==!1};b.length>0;)if(i=b.shift()){if(i.type===w.open)p=i.children[i.children.length-1]||{},j=e.bbcodes[i.name],m=h&&o(j),k=q(i.children,!1),j&&j.html?(o(j)||!o(e.bbcodes[p.name])||j.isPreFormatted||j.skipLastLineBreak||g||(k+="<br />"),a.isFunction(j.html)?l=j.html.call(e,i,i.attrs,k):(i.attrs["0"]=k,l=a.sceditor.plugins.bbcode.formatBBCodeString(j.html,i.attrs))):l=i.val+k+(i.closing?i.closing.val:"");else{if(i.type===w.newline){if(!h){r.push("<br />");continue}n||(r.push("<div>"),(c.documentMode&&c.documentMode<8||8>f)&&r.push("\xa0")),g||r.push("<br />"),b.length||r.push("<br />"),r.push("</div>\n"),n=!1;continue}m=h,l=d(i.val,!0)}m&&!n?(r.push("<div>"),n=!0):!m&&n&&(r.push("</div>\n"),n=!1),r.push(l)}return n&&r.push("</div>\n"),r.join("")},e.toBBCode=function(a,b){return r(e.parse(a,b))},r=function(b){for(var c,d,f,g,h,i,j,k,l,m,n=[];b.length>0;)if(c=b.shift())if(f=e.bbcodes[c.name],g=!(!f||f.isInline!==!1),h=f&&f.isSelfClosing,j=g&&e.opts.breakBeforeBlock&&f.breakBefore!==!1||f&&f.breakBefore,k=g&&!h&&e.opts.breakStartBlock&&f.breakStart!==!1||f&&f.breakStart,l=g&&e.opts.breakEndBlock&&f.breakEnd!==!1||f&&f.breakEnd,m=g&&e.opts.breakAfterBlock&&f.breakAfter!==!1||f&&f.breakAfter,i=(f?f.quoteType:null)||e.opts.quoteType||a.sceditor.BBCodeParser.QuoteType.auto,f||c.type!==w.open)if(c.type===w.open){if(j&&n.push("\n"),n.push("["+c.name),c.attrs){c.attrs.defaultattr&&(n.push("="+t(c.attrs.defaultattr,i,"defaultattr")),delete c.attrs.defaultattr);for(d in c.attrs)c.attrs.hasOwnProperty(d)&&n.push(" "+d+"="+t(c.attrs[d],i,d))}n.push("]"),k&&n.push("\n"),c.children&&n.push(r(c.children)),h||f.excludeClosing||(l&&n.push("\n"),n.push("[/"+c.name+"]")),m&&n.push("\n"),c.closing&&h&&n.push(c.closing.val)}else n.push(c.val);else n.push(c.val),c.children&&n.push(r(c.children)),c.closing&&n.push(c.closing.val);return n.join("")},t=function(b,c,d){var e=a.sceditor.BBCodeParser.QuoteType,f=/\s|=/.test(b);return a.isFunction(c)?c(b,d):c===e.never||c===e.auto&&!f?b:'"'+b.replace("\\","\\\\").replace('"','\\"')+'"'},v=function(a){return a.length?a[a.length-1]:null},u=function(a){return a.toLowerCase()},h()},a.sceditor.BBCodeParser.QuoteType={always:1,never:2,auto:3},a.sceditor.BBCodeParser.defaults={breakBeforeBlock:!1,breakStartBlock:!1,breakEndBlock:!1,breakAfterBlock:!0,removeEmptyTags:!0,fixInvalidNesting:!0,fixInvalidChildren:!0,quoteType:a.sceditor.BBCodeParser.QuoteType.auto},a.sceditorBBCodePlugin=a.sceditor.plugins.bbcode=function(){var d,e,f,h,i,j,b=this;h=a.sceditor.plugins.bbcode.formatString,b.bbcodes=a.sceditor.plugins.bbcode.bbcodes,b.stripQuotes=a.sceditor.plugins.bbcode.stripQuotes;var k={},l={},m={ul:["li","ol","ul"],ol:["li","ol","ul"],table:["tr"],tr:["td","th"],code:["br","p","div"]};b.init=function(){b.opts=this.opts,d(),i(this),this.toBBCode=b.signalToSource,this.fromBBCode=b.signalToWysiwyg},i=function(b){var c=a.sceditor.command.get,d={bold:{txtExec:["[b]","[/b]"]},italic:{txtExec:["[i]","[/i]"]},underline:{txtExec:["[u]","[/u]"]},strike:{txtExec:["[s]","[/s]"]},subscript:{txtExec:["[sub]","[/sub]"]},superscript:{txtExec:["[sup]","[/sup]"]},left:{txtExec:["[left]","[/left]"]},center:{txtExec:["[center]","[/center]"]},right:{txtExec:["[right]","[/right]"]},justify:{txtExec:["[justify]","[/justify]"]},font:{txtExec:function(a){var b=this;c("font")._dropDown(b,a,function(a){b.insertText("[font="+a+"]","[/font]")})}},size:{txtExec:function(a){var b=this;c("size")._dropDown(b,a,function(a){b.insertText("[size="+a+"]","[/size]")})}},color:{txtExec:function(a){var b=this;c("color")._dropDown(b,a,function(a){b.insertText("[color="+a+"]","[/color]")})}},bulletlist:{txtExec:function(c,d){var e="";a.each(d.split(/\r?\n/),function(){e+=(e?"\n":"")+"[li]"+this+"[/li]"}),b.insertText("[ul]\n"+e+"\n[/ul]")}},orderedlist:{txtExec:function(c,d){var e="";a.each(d.split(/\r?\n/),function(){e+=(e?"\n":"")+"[li]"+this+"[/li]"}),a.sceditor.plugins.bbcode.bbcode.get(""),b.insertText("[ol]\n"+e+"\n[/ol]")}},table:{txtExec:["[table][tr][td]","[/td][/tr][/table]"]},horizontalrule:{txtExec:["[hr]"]},code:{txtExec:["[code]","[/code]"]},image:{txtExec:function(a,b){var c=prompt(this._("Enter the image URL:"),b);c&&this.insertText("[img]"+c+"[/img]")}},email:{txtExec:function(a,b){var c=b&&b.indexOf("@")>-1?null:b,d=prompt(this._("Enter the e-mail address:"),c?"":b),e=prompt(this._("Enter the displayed text:"),c||d)||d;d&&this.insertText("[email="+d+"]"+e+"[/email]")}},link:{txtExec:function(b,c){var d=/^[a-z]+:\/\//i.test(a.trim(c))?null:c,e=prompt(this._("Enter URL:"),d?"http://":a.trim(c)),f=prompt(this._("Enter the displayed text:"),d||e)||e;e&&this.insertText("[url="+e+"]"+f+"[/url]")}},quote:{txtExec:["[quote]","[/quote]"]},youtube:{txtExec:function(a){var b=this;c("youtube")._dropDown(b,a,function(a){b.insertText("[youtube]"+a+"[/youtube]")})}},rtl:{txtExec:["[rtl]","[/rtl]"]},ltr:{txtExec:["[ltr]","[/ltr]"]}};b.commands=a.extend(!0,{},d,b.commands)},d=function(){a.each(b.bbcodes,function(c){b.bbcodes[c].tags&&a.each(b.bbcodes[c].tags,function(a,d){var e=b.bbcodes[c].isInline===!1;k[a]=k[a]||{},k[a][e]=k[a][e]||{},k[a][e][c]=d}),b.bbcodes[c].styles&&a.each(b.bbcodes[c].styles,function(a,d){var e=b.bbcodes[c].isInline===!1;l[e]=l[e]||{},l[e][a]=l[e][a]||{},l[e][a][c]=d})})},e=function(c,d,e){var f,g,i=a.sceditor.dom.getStyle;return e=!!e,l[e]?(a.each(l[e],function(e,j){f=i(c[0],e),f&&i(c.parent()[0],e)!==f&&a.each(j,function(e,i){(!i||a.inArray(f.toString(),i)>-1)&&(g=b.bbcodes[e].format,d=a.isFunction(g)?g.call(b,c,d):h(g,d))})}),d):d},f=function(c,d,e){var f,i,j=c[0],l=j.nodeName.toLowerCase();e=!!e,k[l]&&k[l][e]&&a.each(k[l][e],function(e,g){(!g||(f=!1,a.each(g,function(b,d){return!c.attr(b)||d&&a.inArray(c.attr(b),d)<0?void 0:(f=!0,!1)}),f))&&(i=b.bbcodes[e].format,d=a.isFunction(i)?i.call(b,c,d):h(i,d))});var m=a.sceditor.dom.isInline;if(e&&(!m(j,!0)||"br"===l)){for(var n,o,p,q=j.previousSibling;q&&(a(q).hasClass("sceditor-ignore")||1===q.nodeType&&m(q,!0)&&!q.firstChild);)q=q.previousSibling;do{for(o=j.parentNode,p=o.lastChild;a(p).hasClass("sceditor-ignore");)p=p.previousSibling;n=p===j,j=o}while(o&&n&&m(o,!0));(!n||"li"===l||"br"===l&&g)&&(d+="\n"),"br"!==l&&"blockquote"!==l&&"code"!==l&&q&&!a(q).is("br")&&m(q,!0)&&(d="\n"+d)}return d},b.signalToSource=function(d,e){var f,g,h=new a.sceditor.BBCodeParser(b.opts.parserOptions);return e||("string"==typeof d?(f=a("<div />").css("visibility","hidden").appendTo(c.body).html(d),e=f):e=a(d)),e&&e.jquery?(a.sceditor.dom.removeWhiteSpace(e[0]),g=b.elementToBbcode(e),f&&f.remove(),g=h.toBBCode(g,!0),b.opts.bbcodeTrim&&(g=a.trim(g)),g):""},b.elementToBbcode=function(b){return function c(b,d){var h="";return a.sceditor.dom.traverse(b,function(b){var i=a(b),j="",k=b.nodeType,l=b.nodeName.toLowerCase(),n=m[l],o=b.firstChild,p=!0;if("object"==typeof d&&(p=a.inArray(l,d)>-1,i.is("img")&&i.data("sceditor-emoticon")&&(p=!0),p||(n=d)),3===k||1===k)if(1===k){if(i.hasClass("sceditor-ignore"))return;if(i.hasClass("sceditor-nlf")&&(!o||!g&&1===b.childNodes.length&&/br/i.test(o.nodeName)))return;"iframe"!==l&&(j=c(b,n)),p?("code"!==l&&(j=e(i,j),j=f(i,j),j=e(i,j,!0)),h+=f(i,j,!0)):h+=j}else!b.wholeText||b.previousSibling&&3===b.previousSibling.nodeType?b.wholeText||(h+=b.nodeValue):h+=0===i.parents("code").length?b.wholeText.replace(/ +/g," "):b.wholeText},!1,!0),h}(b[0])},b.signalToWysiwyg=function(c,d){var e=new a.sceditor.BBCodeParser(b.opts.parserOptions),f=e.toHTML(b.opts.bbcodeTrim?a.trim(c):c);return d?j(f):f},j=function(b){var d,e,f,h=a("<div />").hide().appendTo(c.body),i=h[0];return f=function(b,d){if(!a.sceditor.dom.hasStyling(b)){if(g||1!==b.childNodes.length||!a(b.firstChild).is("br"))for(;e=b.firstChild;)i.insertBefore(e,b);if(d){var f=i.lastChild;b!==f&&a(f).is("div")&&b.nextSibling===f&&i.insertBefore(c.createElement("br"),b)}i.removeChild(b)}},i.innerHTML=b.replace(/<\/div>\n/g,"</div>"),(d=i.firstChild)&&a(d).is("div")&&f(d,!0),(d=i.lastChild)&&a(d).is("div")&&f(d),i=i.innerHTML,h.remove(),i}},a.sceditor.plugins.bbcode.stripQuotes=function(a){return a?a.replace(/\\(.)/g,"$1").replace(/^(["'])(.*?)\1$/,"$2"):a},a.sceditor.plugins.bbcode.formatString=function(){var a,b=arguments;return b[0].replace(/\{(\d+)\}/g,function(c,d){return b[d-0+1]!==a?b[d-0+1]:"{"+d+"}"})},a.sceditor.plugins.bbcode.formatBBCodeString=function(a,b){return a.replace(/\{([^}]+)\}/g,function(a,c){var e,f=!0;return"!"===c.charAt(0)&&(f=!1,c=c.substring(1)),"0"===c&&(f=!1),b[c]===e?a:f?d(b[c],!0):b[c]})};var h=a.sceditor.plugins.bbcode.normaliseColour=function(a){var b,c;return c=function(a){return a=parseInt(a,10),isNaN(a)?"00":(a=Math.max(0,Math.min(a,255)).toString(16),a.length<2?"0"+a:a)},a=a||"#000",(b=a.match(/rgb\((\d{1,3}),\s*?(\d{1,3}),\s*?(\d{1,3})\)/i))?"#"+c(b[1])+c(b[2]-0)+c(b[3]-0):(b=a.match(/#([0-f])([0-f])([0-f])\s*?$/i))?"#"+b[1]+b[1]+b[2]+b[2]+b[3]+b[3]:a};a.sceditor.plugins.bbcode.bbcodes={b:{tags:{b:null,strong:null},styles:{"font-weight":["bold","bolder","401","700","800","900"]},format:"[b]{0}[/b]",html:"<strong>{0}</strong>"},i:{tags:{i:null,em:null},styles:{"font-style":["italic","oblique"]},format:"[i]{0}[/i]",html:"<em>{0}</em>"},u:{tags:{u:null},styles:{"text-decoration":["underline"]},format:"[u]{0}[/u]",html:"<u>{0}</u>"},s:{tags:{s:null,strike:null},styles:{"text-decoration":["line-through"]},format:"[s]{0}[/s]",html:"<s>{0}</s>"},sub:{tags:{sub:null},format:"[sub]{0}[/sub]",html:"<sub>{0}</sub>"},sup:{tags:{sup:null},format:"[sup]{0}[/sup]",html:"<sup>{0}</sup>"},font:{tags:{font:{face:null}},styles:{"font-family":null},quoteType:a.sceditor.BBCodeParser.QuoteType.never,format:function(a,b){var c;return"font"===a[0].nodeName.toLowerCase()&&(c=a.attr("face"))||(c=a.css("font-family")),"[font="+this.stripQuotes(c)+"]"+b+"[/font]"},html:'<font face="{defaultattr}">{0}</font>'},size:{tags:{font:{size:null}},styles:{"font-size":null},format:function(a,b){var c=a.attr("size"),d=2;return c||(c=a.css("fontSize")),c.indexOf("px")>-1?(c=c.replace("px","")-0,12>c&&(d=1),c>15&&(d=3),c>17&&(d=4),c>23&&(d=5),c>31&&(d=6),c>47&&(d=7)):d=c,"[size="+d+"]"+b+"[/size]"},html:'<font size="{defaultattr}">{!0}</font>'},color:{tags:{font:{color:null}},styles:{color:null},quoteType:a.sceditor.BBCodeParser.QuoteType.never,format:function(a,b){var c,d=a[0];return"font"===d.nodeName.toLowerCase()&&(c=a.attr("color"))||(c=d.style.color||a.css("color")),"[color="+h(c)+"]"+b+"[/color]"},html:function(a,b,c){return'<font color="'+d(h(b.defaultattr),!0)+'">'+c+"</font>"}},ul:{tags:{ul:null},breakStart:!0,isInline:!1,skipLastLineBreak:!0,format:"[ul]{0}[/ul]",html:"<ul>{0}</ul>"},list:{breakStart:!0,isInline:!1,skipLastLineBreak:!0,html:"<ul>{0}</ul>"},ol:{tags:{ol:null},breakStart:!0,isInline:!1,skipLastLineBreak:!0,format:"[ol]{0}[/ol]",html:"<ol>{0}</ol>"},li:{tags:{li:null},isInline:!1,closedBy:["/ul","/ol","/list","*","li"],format:"[li]{0}[/li]",html:"<li>{0}</li>"},"*":{isInline:!1,closedBy:["/ul","/ol","/list","*","li"],html:"<li>{0}</li>"},table:{tags:{table:null},isInline:!1,isHtmlInline:!0,skipLastLineBreak:!0,format:"[table]{0}[/table]",html:"<table>{0}</table>"},tr:{tags:{tr:null},isInline:!1,skipLastLineBreak:!0,format:"[tr]{0}[/tr]",html:"<tr>{0}</tr>"},th:{tags:{th:null},allowsEmpty:!0,isInline:!1,format:"[th]{0}[/th]",html:"<th>{0}</th>"},td:{tags:{td:null},allowsEmpty:!0,isInline:!1,format:"[td]{0}[/td]",html:"<td>{0}</td>"},emoticon:{allowsEmpty:!0,tags:{img:{src:null,"data-sceditor-emoticon":null}},format:function(a,b){return a.data("sceditor-emoticon")+b},html:"{0}"},hr:{tags:{hr:null},allowsEmpty:!0,isSelfClosing:!0,isInline:!1,format:"[hr]{0}",html:"<hr />"},img:{allowsEmpty:!0,tags:{img:{src:null}},allowedChildren:["#"],quoteType:a.sceditor.BBCodeParser.QuoteType.never,format:function(a,b){var c,d,e="",f=a[0],g=function(a){return f.style?f.style[a]:null};return a.attr("data-sceditor-emoticon")?b:(c=a.attr("width")||g("width"),d=a.attr("height")||g("height"),(f.complete&&(c||d)||c&&d)&&(e="="+a.width()+"x"+a.height()),"[img"+e+"]"+a.attr("src")+"[/img]")},html:function(a,b,c){var f,g,h,i,j="";return b.width!==f&&(g=b.width),b.height!==f&&(h=b.height),b.defaultattr&&(i=b.defaultattr.split(/x/i),g=i[0],h=2===i.length?i[1]:i[0]),g!==f&&(j+=' width="'+d(g,!0)+'"'),h!==f&&(j+=' height="'+d(h,!0)+'"'),"<img"+j+' src="'+e(c)+'" />'}},url:{allowsEmpty:!0,tags:{a:{href:null}},quoteType:a.sceditor.BBCodeParser.QuoteType.never,format:function(a,b){var c=a.attr("href");return"mailto:"===c.substr(0,7)?'[email="'+c.substr(7)+'"]'+b+"[/email]":"[url="+c+"]"+b+"[/url]"},html:function(a,b,c){return b.defaultattr=d(b.defaultattr,!0)||c,'<a href="'+e(b.defaultattr)+'">'+c+"</a>"}},email:{quoteType:a.sceditor.BBCodeParser.QuoteType.never,html:function(a,b,c){return'<a href="mailto:'+(d(b.defaultattr,!0)||c)+'">'+c+"</a>"}},quote:{tags:{blockquote:null},isInline:!1,quoteType:a.sceditor.BBCodeParser.QuoteType.never,format:function(b,c){var d="",e=a(b),f=e.children("cite").first();return(1===f.length||e.data("author"))&&(d=f.text()||e.data("author"),e.data("author",d),f.remove(),c=this.elementToBbcode(a(b)),d="="+d,e.prepend(f)),"[quote"+d+"]"+c+"[/quote]"},html:function(a,b,c){return b.defaultattr&&(c="<cite>"+d(b.defaultattr)+"</cite>"+c),"<blockquote>"+c+"</blockquote>"}},code:{tags:{code:null},isInline:!1,allowedChildren:["#","#newline"],format:"[code]{0}[/code]",html:"<code>{0}</code>"},left:{styles:{"text-align":["left","-webkit-left","-moz-left","-khtml-left"]},isInline:!1,format:"[left]{0}[/left]",html:'<div align="left">{0}</div>'},center:{styles:{"text-align":["center","-webkit-center","-moz-center","-khtml-center"]},isInline:!1,format:"[center]{0}[/center]",html:'<div align="center">{0}</div>'},right:{styles:{"text-align":["right","-webkit-right","-moz-right","-khtml-right"]},isInline:!1,format:"[right]{0}[/right]",html:'<div align="right">{0}</div>'},justify:{styles:{"text-align":["justify","-webkit-justify","-moz-justify","-khtml-justify"]},isInline:!1,format:"[justify]{0}[/justify]",html:'<div align="justify">{0}</div>'},youtube:{allowsEmpty:!0,tags:{iframe:{"data-youtube-id":null}},format:function(a,b){return a=a.attr("data-youtube-id"),a?"[youtube]"+a+"[/youtube]":b},html:'<iframe width="560" height="315" src="http://www.youtube.com/embed/{0}?wmode=opaque" data-youtube-id="{0}" frameborder="0" allowfullscreen></iframe>'},rtl:{styles:{direction:["rtl"]},format:"[rtl]{0}[/rtl]",html:'<div style="direction: rtl">{0}</div>'},ltr:{styles:{direction:["ltr"]},format:"[ltr]{0}[/ltr]",html:'<div style="direction: ltr">{0}</div>'},ignore:{}},a.sceditor.plugins.bbcode.bbcode={get:function(b){return a.sceditor.plugins.bbcode.bbcodes[b]||null},set:function(b,c){var d=a.sceditor.plugins.bbcode.bbcodes;return b&&c?(c=a.extend(d[b]||{},c),c.remove=function(){delete d[b]},d[b]=c,this):!1},rename:function(b,c){var d=a.sceditor.plugins.bbcode.bbcodes;return b in d?(d[c]=d[b],delete d[b],this):!1},remove:function(b){var c=a.sceditor.plugins.bbcode.bbcodes;return b in c&&delete c[b],this}},a.fn.sceditorBBCodePlugin=function(b){return b=b||{},a.isPlainObject(b)&&(b.plugins=(b.plugins?b.plugins:"")+"bbcode"),this.sceditor(b)}}(jQuery,window,document);